
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VK Постер с фильтрацией</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
    h1 { text-align: center; }
    button {
      margin: 5px;
      padding: 10px 15px;
      border: none;
      background-color: #0077cc;
      color: white;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover { background-color: #005fa3; }
    .log {
      margin-top: 20px;
      padding: 10px;
      background: white;
      border-radius: 5px;
      height: 200px;
      overflow-y: scroll;
      font-size: 14px;
    }
    .bad { color: red; }
    .good { color: green; }
  </style>
</head>
<body>

<h1>VK Постер — Выкладка от авторов с проверкой</h1>
<button onclick="fetchPosts()">Загрузить предложку</button>
<div class="log" id="log">[Готово к работе]</div>

<script>
const token = "vk1.a.2YnytTBYljtquVF7l0XrYJOVbDWpa9DIVqE6fh-gfyWBCyz_ZtsTiQAUGFiSVHTbxptDFHJSHYq-oB_Q-0JTRgRFIDijMr3mGf8pWmtwkVGVUb_YmjKGimInADJnapGo5JT2cXjG5CEyZkCoxlerQsb2cflFYLuzJuIkHnhNUk2YCd0lwro64piSo6o3lg6kNPuroBYso7bnvznnI4laMQ";
const group_id = 136706358; // Заменить на ID группы

function log(msg, type = '') {
  const el = document.getElementById('log');
  const time = new Date().toLocaleTimeString();
  el.innerHTML += `<div class="${type}">[${time}] ${msg}</div>`;
  el.scrollTop = el.scrollHeight;
}

function fetchPosts() {
  log("Загружаем предложку...");
  const script = document.createElement('script');
  const callbackName = 'jsonpCallback_' + Math.floor(Math.random() * 100000);
  window[callbackName] = function(data) {
    if (data.response) {
      log("Получено постов: " + data.response.items.length, "good");
    } else {
      log("Ошибка VK: " + JSON.stringify(data.error), "bad");
    }
    delete window[callbackName];
    document.body.removeChild(script);
  };
  script.src = `https://api.vk.com/method/wall.get?owner_id=-${group_id}&filter=suggests&count=100&access_token=${token}&v=5.199&callback=${callbackName}`;
  document.body.appendChild(script);
}
</script>

</body>
</html>
